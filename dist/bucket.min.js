!function(t,e){"use strict";var n=t.bucket={};n.append=function(t,n){var r=n?"body":"head",o=e[r]||e.getElementsByTagName(r)[0];if(n&&!o)throw new Error("You should put your require script into body");o.appendChild(t)},n.collect=function(){this.ls.forEach(function(t){this.ls.get(t)},this)},setTimeout(function(){n.collect()},0),n.createElement=function(t,n){n=n||{};var r="script";n.style&&(r=n.link?"link":"style");var o=e.createElement(r);return n.style?n.link?(o.rel="stylesheet",o.href=t):"textContent"in o?o.textContent=t:o.styleSheet?o.styleSheet.cssText=t:o.appendChild(e.createTextNode(t)):(o[n.link?"src":"text"]=t,o.defer=!!n.defer),o},n.fetch=function(t,e,n){var r=Object.prototype.toString,o=e;if("[object Function]"===r.call(e)&&(n=e,o={}),"[object Function]"!==r.call(n))throw new Error("Bad arguments");var i=new XMLHttpRequest;i.open("GET",t,!o.sync),i.onreadystatechange=function(){4===i.readyState&&(clearTimeout(this._timeout),n(200!==i.status,i.responseText))},i.onerror=function(){i._timeout&&clearTimeout(this._timeout),n(!0)},i._timeout=o.timeout&&setTimeout(function(){i.readyState<4&&(i.abort(),n(!0))},o.timeout),i.send()},n.getItem=function(t,e){var n=this.ls.get(t);return n&&n.version===(e||null)&&(0===n.expire||+new Date<=n.expire+n.timestamp)||(this.ls.remove(t),n={}),n.data||null},n.ls=function(){var e=null,r="bucket:";try{e=t.localStorage}catch(o){}return{get:function(t){var n=null;try{n=JSON.parse(e.getItem(r+t))}catch(o){}return n},set:function(t,n){this.remove(t);try{e.setItem(r+t,JSON.stringify(n))}catch(o){}},remove:function(t){try{e.removeItem(r+t)}catch(n){}},forEach:function(t,r){try{Object.keys(e).forEach(function(e){/^bucket:/.test(e)&&t.call(r||n,e.split(":")[1])})}catch(o){}}}}(),n.require=function(t,e,r){function o(t,e){n.append(n.createElement(t,{defer:i.defer,style:a,link:e}),i.bottom),r&&r(),n._resolve(c)}var i=e||{};"function"==typeof e&&(r=e,i={});var c=i.key||t,s=i.link?t:this.getItem(c,i.version),a=/.css$|.css\?/.test(t);if(a&&i.defer)throw new Error("Bad options");s?n._waitFor(c,i.waitFor||null,function(){o.call(n,s,!!i.link)}):this.fetch(t,{sync:i.sync,timeout:i.timeout||5e3},function(e,r){e||n.setItem(c,r,{expire:i.expire,version:i.version}),n._waitFor(c,i.waitFor||null,function(){o.call(n,e?t:r,!!e)})})},n.setItem=function(t,e,n){return n=n||{},this.ls.set(t,{timestamp:+new Date,expire:n.expire||0,version:n.version||null,data:e}),e};var r={},o={},i={},c={};n._waitFor=function(t,e,n){return e?(void 0===o[t]&&(o[t]=0),i[t]=n,[].concat(e).forEach(function(e){if(r[t]&&r[t][e])throw new Error("Circular dependency pair:",e,t);c[e]||(o[t]++,(r[e]||(r[e]={}))[t]=!0)}),void(o[t]||n())):n()},n._resolve=function(t){Object.keys(r[t]||{}).forEach(function(t){o[t]&&(--o[t]||i[t]())},this),c[t]=!0}}(this,document);