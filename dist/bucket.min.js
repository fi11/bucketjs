!function(t,e){"use strict";var n=t.bucket={};n.append=function(t,n){var r=n?"body":"head";(e[r]||e.getElementsByTagName(r)[0]).appendChild(t)},n.collect=function(){this.ls.forEach(function(t){this.get(t)},this)},setTimeout(function(){n.collect()},0),n.createElement=function(t,n){n=n||{};var r="script";n.style&&(r=n.link?"link":"style");var i=e.createElement(r);return n.style?n.link?(i.rel="stylesheet",i.href=t):"textContent"in i?i.textContent=t:i.styleSheet?i.styleSheet.cssText=t:i.appendChild(e.createTextNode(t)):(i[n.link?"src":"text"]=t,i.defer=!!n.defer),i},n.fetch=function(t,e,n){var r=Object.prototype.toString,i=e;if("[object Function]"===r.call(e)&&(n=e,i={}),"[object Function]"!==r.call(n))throw new Error("Bad arguments");var o=new XMLHttpRequest;o.open("GET",t,!i.sync),o.onreadystatechange=function(){4===o.readyState&&(clearTimeout(this._timeout),n(200!==o.status,o.responseText))},o.onerror=function(){o._timeout&&clearTimeout(this._timeout),n(!0)},o._timeout=i.timeout&&setTimeout(function(){o.readyState<4&&(o.abort(),n(!0))},i.timeout),o.send()},n.getItem=function(t,e){var n=this.ls.get(t);return n&&n.version===(e||null)&&(0===n.expire||+new Date<=n.expire+n.timestamp)||(this.ls.remove(t),n={}),n.data||null},n.ls=function(){var e=null,r="bucket:";try{e=t.localStorage}catch(i){}return{get:function(t){var n=null;try{n=JSON.parse(e.getItem(r+t))}catch(i){}return n},set:function(t,n){this.remove(t);try{e.setItem(r+t,JSON.stringify(n))}catch(i){}},remove:function(t){try{e.removeItem(r+t)}catch(n){}},forEach:function(t,r){try{Object.keys(e).forEach(function(e){/^bucket:/.test(e)&&t.call(r||n,e.split(":")[1])})}catch(i){}}}}(),n.require=function(t,e,r){var i=e||{};"function"==typeof e&&(r=e,i={});var o=i.key||t,s=i.link?t:this.getItem(o,i.version),c=/.css$|.css\?/.test(t);if(c&&i.defer)throw new Error("Bad options");s?(this.append(this.createElement(s,{defer:i.defer,style:c,link:!!i.link}),i.bottom),r&&r()):this.fetch(t,{sync:i.sync,timeout:i.timeout||5e3},function(e,s){e||n.setItem(o,s,{expire:i.expire,version:i.version}),n.append(n.createElement(e?t:s,{defer:i.defer,style:c,link:!!e}),i.bottom),r&&r()})},n.setItem=function(t,e,n){return n=n||{},this.ls.set(t,{timestamp:+new Date,expire:n.expire||0,version:n.version||null,data:e}),e}}(this,document);